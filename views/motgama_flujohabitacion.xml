<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <act_window
        id="action_wizard_habitacion"               
        res_model="motgama.wizardhabitacion" 
        name="Flujo Habitacion"
        src_model="motgama.flujohabitacion"
        view_type="form"    
        view_mode="form" 
        multi="True"
        target="new"
    />
    
<!-- Búsqueda                                                                                                       P7.0.4R -->
    <record id="search_view_flujohabitacion" model="ir.ui.view">
        <field name="name">Flujo Habitación</field>
        <field name="model">motgama.flujohabitacion</field>
        <field name="arch" type="xml">
            <search>
                <field name="codigo"/>
                <field name="estado"/>
                <field name="ultmovimiento"/>
            </search>
        </field>
    </record>

    <!--Tree-->
    <!-- <record id="tree_view_habitacion" model="ir.ui.view">
    <field name="name">Habitacion</field>
    <field name="model">motgama.habitacion</field>
    <field name="limit">100</field>
    <field name="arch" type="xml">
    
    <tree string="Habitacion">
            <field name="codigo"/>
            <field name="nombre"/>
            <field name="zona_id"/>
            <field name="tema_id"/>
            <field name="tipo_id"/>
            <field name="inmotica"/>
            <field name="estado_tree"/>
    </tree>
    </field>
    </record> -->
    <!--Formulario                                                                                                           P7.0.4R -->
    <record id="form_view_flujohabitacion" model="ir.ui.view">
        <field name="name">Habitación</field>
        <field name="model">motgama.flujohabitacion</field>
        <field name="arch" type="xml">
            <form string="Flujo Habitaciones">
                <sheet>
                    <group name="group_bottom">
                        <group name="group_left">            
                            <field name="codigo" string="Codigo de la habitación" style="width:20%; font-size:20px; font-weight: bold;"/>
                        </group>
                    </group>
                    <group name="group_top">
                        <field name="estado" string="Estado"/>
                        <!-- <field name="estado" string="Estado" readonly="1"/> -->
                        <field name="active" string="Activar" readonly="1"/>
                        <br/>
                        <field name="recepcion" string="Recepción" readonly="1"/>
                        <br/><br/><br/>
                    </group><br/>
                    
                    <notebook>
                        <page name='cuenta_cobro' string='Cuenta de Cobro' attrs="{'invisible':[('estado','not in','LQ')]}">
                            <button name="button_cuentacobro" string="Ver cuenta de cobro" type="object" class="btn"/>
                        </page>
                    </notebook>
                    
                    <footer>
                        <group name="group_top" col="10">
                            <button type="action" name="%(action_wizard_habitacion)d" string="Asignar habitación" 
                                class="btn btn-success" attrs="{'invisible':[('estado','not in',['D'])]}" />
                                
                            <button type="action" name="%(motgama.action_wizard_desasigna)d" string="Desasignar" confirm="¿Esta seguro de Desasignar la habitacion?"
                                class="btn btn-info" attrs="{'invisible':[('estado','not in',['OO', 'OA'])]}"/>

                            <button type="action" name="%(motgama.action_wizard_cambio_plan)d" string="Cambio de Plan" confirm="¿Esta seguro de cambiar de plan entre amanecida y ocasional?"
                                class="btn btn-info" attrs="{'invisible':[('estado','not in',['OO', 'OA'])]}"/>

                            <button type="action" name="%(motgama.action_wizard_cambio_habitacion)d" string="Cambio (Reasigna) habitación"
                                class="btn btn-info" attrs="{'invisible':[('estado','not in',['OO', 'OA'])]}"/>
                                
                            <button type="action" name="%(motgama.action_wizard_fuera_servicio)d" string="Fuera de servicio" confirm="¿Esta seguro de realizar esta acción de cambiar el estado a Fuera de Servicio?"
                                class="btn btn-info" attrs="{'invisible':[('estado','not in','D')]}"/>
                                
                            <button type="action" name="%(motgama.action_wizard_fuera_uso)d" string="Fuera de uso" confirm="¿Esta seguro de realizar esta acción de cambiar el estado a Fuera de Uso?"
                                class="btn btn-info" attrs="{'invisible':[('estado','not in','D')]}"/>
                                
                            <button name="button_habilita" string="Habilitar habitacion" type="object"
                                class="btn btn"  attrs="{'invisible': [('estado', 'not in', ['RC'])]}" confirm="¿Esta seguro de realizar esta acción de cambiar el estado a Disponible?"/>
                                
                            <button name="button_aseo" string="Asear" type="object"
                                class="btn btn"  attrs="{'invisible': [('estado', 'not in', ['FS', 'FU'])]}" confirm="¿Esta seguro de realizar esta acción de cambiar el estado a Asear"/>

                            <button name="button_liquidar" string="Liquidar" type="object"
                                class="btn btn"  attrs="{'invisible': [('estado','not in',['OO', 'OA'])]}"
                                confirm="¿Está seguro que desea liquidar esta habitación?"/>
                                
                            <button name="button_recaudar" string="Recaudar" type="object"
                                class="btn btn"  attrs="{'invisible': [('estado','not in',['LQ'])]}"/>
                                
                            <button name="button_continuar" string="Rehabilitar" type="object"
                                class="btn btn"  attrs="{'invisible': [('estado','not in', 'LQ')]}"/>
                        </group>
                    </footer>
                </sheet>   
            </form>
        </field>
    </record>
    
    <record id="class_dashboard" model="ir.ui.view">
        <field name="name">Flujo Habitación kanban</field>
        <field name="model">motgama.flujohabitacion</field>
        <field name="type">kanban</field>
        <field name="arch" type="xml">
            <kanban quick_create="false" create="false" delete="false">
                <field name="codigo"/>
                <field name="estado"/>
                <templates id="template" xml:space="preserve">
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_color_{{kanban_getcolor(record.estado.raw_value)}}"  class="o_kanban_record" style="pointer-events: none; position: relative; width: 50px; height: 90px;"> 
                            <button style="pointer-events:auto; position: relative; width:100%; height:100%; background:none; border:none;" title="open" type="object" name="open_record">
                                <t t-if="record.estado.raw_value === 'D'">
                                    <img alt="Disponible" t-att-src="_s + &quot;/motgama/static/src/img/estado_verde.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                </t>
                                <t t-if="record.estado.raw_value === 'OO'">
                                    <img alt="Ocupado Ocasional" t-att-src="_s + &quot;/motgama/static/src/img/estado_rojo.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                </t>
                                <t t-if="record.estado.raw_value === 'OA'">
                                    <img alt="Ocupado Amanecida" t-att-src="_s + &quot;/motgama/static/src/img/estado_naranjado.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                </t>
                                <t t-if="record.estado.raw_value === 'LQ'">
                                    <img alt="Liquidada" t-att-src="_s + &quot;/motgama/static/src/img/estado_fucsia.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                </t>
                                <t t-if="record.estado.raw_value === 'RC'">
                                    <img alt="Recaudada" t-att-src="_s + &quot;/motgama/static/src/img/estado_azul.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                </t>
                                <t t-if="record.estado.raw_value === 'R'">
                                    <img alt="Reservada" t-att-src="_s + &quot;/motgama/static/src/img/estado_amarillo.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                </t>
                                <t t-if="record.estado.raw_value === 'FS'">
                                    <img alt="Fuera de Servicio" t-att-src="_s + &quot;/motgama/static/src/img/estado_azulclaro.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                </t>
                                <t t-if="record.estado.raw_value === 'FU'">
                                    <img alt="Fuera de Uso" t-att-src="_s + &quot;/motgama/static/src/img/estado_cafe.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                </t>    
                                <t t-if="record.estado.raw_value === 'HB'">
                                    <img alt="Habilitar habitacón" t-att-src="_s + &quot;&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                </t>    
                                <strong style="font-size:16px; text-align: center;">
                                    <field name="codigo"/>
                                </strong>
                                <span><br/><br/><field name="estado"/></span> 
                            </button>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="wizard_asignacion_habitacion" model="ir.ui.view">
        <field name="name">Asignación de habitacion</field>
        <field name="model">motgama.wizardhabitacion</field>
        <field name="arch" type="xml">
            <form>
                <div style="white-space: pre-line;">
                    <p><h5>Asignacion de Habitación</h5></p>
                </div>
                <group>
                    <group>
                        <field name="tipovehiculo"/>
                        <field name="placa"/>
                        <field name="asignatipo"/>
                    </group>
                    <group>
                    </group>
                </group>
                <footer>
                    <button type="object" name="button_asignar_wizard" string="Asignar" class="oe_highlight"/>
                    <button string="Cancel" class="oe_link" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
            
    <!--     <record id="motgama_search_view" model="ir.ui.view"> la zona esta en habit y no en flujohab
            <field name="name">motgama.search.view</field>
            <field name="model">motgama.habitacion</field>
            <field name="arch" type="xml">
                <search string="Habitaciónes en la recepcion">
                    <filter name="searchrecepcion" icon="terp-personal" string="zona" domain="[('zona_id','in',[0,1])]"/>
                </search>
            </field>
        </record>
    -->
</odoo>
